
-- primary key employee_id
Employee(
    employee_id, 
    first_name, last_name,
    national_id
    email, 
    gender,
    salary,
    address,
    official_day_off,
    emergency_phone_number, emergency_name,
    hire_date,
    last_working_date,
    years_of_experience,
    type_of_contract,
    employment_status,
    entitlement_to_annual_leave_balance,
    entitlement_to_accidental_leave_balance 
)

-- primary key employee_id,number
-- foreign key employee_id
PhoneNumber(
    employee_id, number 
) 
PhoneNumber.employee_id references Employee.employee_id

-- primary key role_name
Role(
    role_name, 
    title,
    rank,
    description,
    base_salary,
    initial_annual_leave,
    initial_accidental_leave,
    salary_increase_factor,
    overtime_factor
)

-- primary key dept_name
Department(
    dept_name,
    location
)


#----- Relationships -----#

-- 3ayzeen netna2e4 3ala eh hayeb2a el primary key hena 
replaces(
    employee_on_leave, 
    replacement_employee,
    starting_date, 
    ending_date
)
replaces.employee_on_leave references Employee.employee_id
replaces.key replacement_employee references Employee.employee_id

-- primary key role_name,dept_name
-- foreign key role_name
-- foreign key dept_name
works_in(
    role_name, 
    dept_name 
)
works_in.role_name references Role.role_name
works_in.dept_name references Department.dept_name

-- primary key employee_id,role_name
-- foreign key employee_id
-- foreign key role_name
has_role(
    employee_id, 
    role_name 
)
has_role.role_name references Role.role_name
has_role.employee_id references Employee.employee_id




##############################################
-----------------Ahmad Fathy------------------
##############################################


-- primary key request_id
-- foreign key employee_id
Leave(
    request_id,
    employee_id,
    date_of_request,
    approval_status,
    start_date,
    end_date,
    total_num_of_days = Leave.end_date – Leave.start_date
)
Leave.employee_id references Employee
Where Leave.total_num_of_days = Leave.end_date – Leave.start_date

-- primary key, foreign key request_id
Accidental_Leave(
    request_id 
)
Accidental_Leave.request_id references Leave

-- primary key, foreign key request_id
Annual_Leave(
    request_id
)
Annual_Leave.request_id references Leave

-- primary key, foreign key request_id
Compensation_Leave (
    request_id,
    date_of_extra_workday,
    reason
)
Compensation_Leave.request_id references Leave

-- primary key, foreign key request_id
Medical_Leave (
    request_id,
    insurance_status,
    disability_details
)
Medical_Leave.request_id references Leave

-- primary key, foreign key request_id
Sick_Leave (
    request_id
)
Sick_Leave.request_id references Medical_Leave

-- primary key, foreign key request_id
Maternity_Leave (
    request_id
)
Maternity_Leave.request_id references Medical_Leave




##############################################
-----------------Mohamed Alaa-----------------
##############################################


-- primary key document_id
-- foreign key employee_id
Document(
    document_id, 
    type, 
    size, 
    creation_date, 
    expiry_date, 
    status, 
    storage_location, 
    description, 
    filename, 
    employee_id
)
Document.employee_id references Employee.employee_id


-- primary key performance_id
-- foreign key employee_id
Performance(
    performance_id, 
    rating, 
    employee_id
)
Performance.employee_id references Employee.employee_id


-- primary key performance_id,comment
-- foreign key performance_id
Performance_Comments(
    performance_id, 
    comment
)  
Performance_Comments.performance_id references Performance.performance_id


-- primary key payroll_id
-- foreign key employee_id
Payroll(
    payroll_id, 
    bonuses_amount, 
    final_salary_amount, 
    deductions_amount, 
    payment_date,         
    employee_id
)
Payroll.employee_id references Employee.employee_id

-- primary key payroll_id,comment
-- foreign key payroll_id
Payroll_Comments(
    payroll_id, 
    comment
) 
Payroll_Comments.payroll_id references Payroll.payroll_id


##############################################
-----------------Ahmad Karam-----------------
##############################################

-- primary key attendance_record_id
-- foreign key employee_id
Attendance(
    attendance_record_id,
    date,
    check_in_time,
    check_out_time,
    total_duration,
    employee_id
)
Attendance.employee_id references Employee.employee_id
Where Attendance.total_duration = Attendance.check_out_time - Attendance.check_in_time

-- primary key deduction_id
-- foreign key employee_id
Penalized(
    deduction_id,
    amount,
    type,
    date,
    status,
    employee_id
)
Penalized.employee_id references Employee.employee_id

##############################################
-------------------- Done -------------------
##############################################
